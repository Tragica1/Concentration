<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <title>Console Emulation</title>
    <style>
        body {
            background-color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            font-family: monospace;
        }

        #container {
            text-align: left;
        }

        #console {
            width: 800px;
            height: 1000px;
            border: 1px solid #ccc;
            background-color: black;
            overflow-y: scroll;
            padding: 10px;
            color: white;
            margin-bottom: 10px;
        }

        #input {
            width: 800px;
            padding: 5px;
            background-color: black;
            color: white;
        }
    </style>
</head>
<body>
  <div id="container">
    <h1 style="text-align: center;">Concentration game</h1>
    <div id="console"></div>
    <input id="input" type="text">
</div>

<script>
    const consoleElement = document.getElementById('console');
    const inputElement = document.getElementById('input');
    concentration();
    function writeToConsole(text) {
        const p = document.createElement('p');
        p.textContent = '> ' + text;
        consoleElement.appendChild(p);
        consoleElement.scrollTop = consoleElement.scrollHeight;
    }

    async function processInput() {
        const userInput = inputElement.value;
        writeToConsole(userInput);
        inputElement.value = '';
    }

    function waitForInput() {
        return new Promise(resolve => {
            inputElement.addEventListener('keydown', function(event) {
                if (event.key === 'Enter') {
                    resolve(inputElement.value);
                }
            });
        });
    }
    waitForInput().then(processInput);

    async function concentration() {
        var cards, s1, score, u, w, z, grade;
        writeToConsole("\t\t\t CONCENTRATION");
        writeToConsole("\t       CREATIVE COMPUTING  MORRISTOWN NEW JERSEY");
        writeToConsole("\n\n\n");
        z = "YES";

        while (z === "YES") {
            score = 0;
            cards = ["AS", "2S", "3S", "4S", "5S", "6S", "7S", "8S", "9S", "10S", "JS", "QS", "KS", "AH", "2H", "3H", "4H", "5H", "6H", "7H", "8H", "9H", "10H", "JH", "QH", "KH", "AD", "2D", "3D", "4D", "5D", "6D", "7D", "8D", "9D", "10D", "JD", "QD", "KD", "AC", "2C", "3C", "4C", "5C", "6C", "7C", "8C", "9C", "10C", "JC", "QC", "KC"];
            cards.sort(() => Math.random() - 0.5);
            console.log(cards);

            [u, w] = [-1, -1];

            for (var n = 0, _pj_a = 52; n < _pj_a; n += 1) {
            while (u < 0 || u > 52 || cards[u - 1] === " ") {
                writeToConsole("FIRST CARD?");
                const nextInput = await waitForInput();
                await processInput(nextInput);
                console.log(nextInput)
                u = Number.parseInt(nextInput);
                console.log(u);

                if (u < 0 || u > 52) {
                writeToConsole(`THERE ARE ONLY 52 CARDS IN THE DECK, NOT ${u}`);
                } else {
                if (cards[u - 1] === " ") {
                    writeToConsole("YOU HAVE ALREADY MATCHED THAT CARD.");
                }
                }
            }

            while (w < 0 || w > 52 || u === w || cards[w - 1] === " ") {
                writeToConsole("SECOND CARD?");
                const nextInput = await waitForInput();
                await processInput(nextInput);
                console.log(nextInput)
                w = Number.parseInt(nextInput);
                console.log(w);
                if (w < 0 || w > 52) {
                writeToConsole(`THERE ARE ONLY 52 CARDS IN THE DECK, NOT ${w}`);
                } else {
                if (u === w) {
                    writeToConsole("YOU CAN'T PICK THE SAME CARD TWICE!");
                } else {
                    if (cards[w - 1] === " ") {
                    writeToConsole("YOU HAVE ALREADY MATCHED THAT CARD.");
                    }
                }
                }
            }

            if (cards[u - 1].charAt(0) === cards[w - 1].charAt(0)) {
                console.log("AAAAAAAAA");
                writeToConsole(`THAT'S A MATCH --${cards[u - 1]}   ${cards[w - 1]}`);
                cards[u - 1] = " ";
                cards[w - 1] = " ";
                score += 1;
                writeToConsole(`YOUR SCORE IS NOW ${score}  YOU HAVE HAD  ${n + 1} PICKS.`);
            } else {
                writeToConsole(`# ${u} IS ${cards[u - 1]}        # ${w} IS ${cards[w - 1]}`);
                writeToConsole("XXXXXXXXXXXXXXXXXXXXXXXXXXXXXX");
                writeToConsole("\n");
                u = -1;
                w = -1;
            }
            }

            s1 = score / ((n + 1) / 4);

            if (s1 <= 2) {
                grade = "POOR.";
            } else if (s1 <= 3) {
                grade = "FAIR.";
            } else if (s1 <= 4) {
                grade = "GOOD.";
            } else if (s1 <= 5) {
                grade = "EXCELLENT ! ! !";
            } else {
                grade = ". . . AAAH . . . UH....YOU MUST HAVE CHEATED!";
            }
            writeToConsole(`YOU SCORED ${score} OUT OF ${n + 1}. THAT IS ${grade}`);

            writeToConsole("DO YOU WANT TO PLAY AGAIN? ");
            const nextInput = await waitForInput();
            await processInput(nextInput);
            console.log(nextInput)
            z = nextInput;

            if (z !== "YES") {
                writeToConsole("\nCOME BACK AGAIN!!");
                break;
            }
        }
}
</script>

</body>
</html>
